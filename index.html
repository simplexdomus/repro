<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Repro | Cellular Evolution & Reproduction</title>
    <style>
        :root {
            --primary: #ffffff;
            --secondary: rgba(255,255,255,0.6);
            --tertiary: rgba(255,255,255,0.4);
            --bg-dark: #000000;
            --bg-mid: #0a0a0a;
            --bg-light: #111111;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg-dark);
            color: #fff;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* ===== NAVIGATION ===== */
        .main-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            justify-content: center;
            gap: 40px;
            padding: 20px 40px;
            background: rgba(0,0,0,0.95);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(20px);
        }

        .nav-link {
            color: rgba(255,255,255,0.5);
            text-decoration: none;
            font-size: 0.75rem;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            padding: 10px 20px;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-link:hover { color: rgba(255,255,255,0.9); }
        .nav-link.active { color: rgba(255,255,255,1); }
        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 20px;
            right: 20px;
            height: 1px;
            background: rgba(255,255,255,0.5);
        }

        /* ===== SIDE NAVIGATION ===== */
        .side-nav {
            position: fixed;
            left: 30px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 999;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .side-nav-item {
            width: 12px;
            height: 12px;
            border: 1px solid rgba(255,255,255,0.3);
            background: transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .side-nav-item:hover {
            border-color: rgba(255,255,255,0.8);
            transform: scale(1.2);
        }

        .side-nav-item.active {
            background: rgba(255,255,255,0.9);
            border-color: rgba(255,255,255,0.9);
        }

        .side-nav-item::after {
            content: attr(data-label);
            position: absolute;
            left: 25px;
            top: 50%;
            transform: translateY(-50%);
            white-space: nowrap;
            font-size: 0.65rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: rgba(255,255,255,0.4);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .side-nav-item:hover::after {
            opacity: 1;
        }

        /* ===== PROGRESS BAR ===== */
        .progress-bar {
            position: fixed;
            top: 61px;
            left: 0;
            height: 2px;
            background: rgba(255,255,255,0.8);
            z-index: 1001;
            width: 0%;
            transition: width 0.1s ease;
        }

        /* ===== CONTROLS ===== */
        .controls {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 100;
            display: flex;
            gap: 10px;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border: 1px solid rgba(255,255,255,0.3);
            background: rgba(255,255,255,0.05);
            color: rgba(255,255,255,0.7);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            text-decoration: none;
        }

        .control-btn:hover {
            background: rgba(255,255,255,0.15);
            border-color: rgba(255,255,255,0.5);
            transform: scale(1.1);
        }

        .control-btn.active {
            background: rgba(255,255,255,0.9);
            color: var(--bg-dark);
        }

        .control-btn svg { width: 24px; height: 24px; }

        .volume-slider {
            position: fixed;
            top: 140px;
            right: 20px;
            z-index: 100;
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: rgba(0,0,0,0.9);
            border: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
        }

        .volume-slider.visible { display: flex; }

        .volume-slider input {
            -webkit-appearance: none;
            appearance: none;
            width: 100px;
            height: 1px;
            background: rgba(255,255,255,0.3);
            outline: none;
        }

        .volume-slider input::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            background: rgba(255,255,255,0.8);
            cursor: pointer;
        }

        /* ===== HERO SECTION ===== */
        .hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        #cellCanvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
        }

        .hero-content {
            position: relative;
            z-index: 10;
            text-align: center;
            max-width: 900px;
            padding: 60px 80px;
            background: rgba(0,0,0,0.8);
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(15px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .hero-content.hidden {
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
        }

        .hero-content h1 {
            font-size: 3rem;
            font-weight: 100;
            letter-spacing: 0.6em;
            text-transform: uppercase;
            margin-bottom: 20px;
            color: rgba(255,255,255,0.9);
        }

        .hero-content .tagline {
            font-size: 1rem;
            color: rgba(255,255,255,0.5);
            letter-spacing: 0.4em;
            margin-bottom: 40px;
        }

        .hero-content .intro {
            font-size: 0.9rem;
            line-height: 2;
            color: rgba(255,255,255,0.6);
            max-width: 600px;
            margin: 0 auto;
        }

        .scroll-indicator {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            animation: float 3s ease-in-out infinite;
            z-index: 10;
        }

        .scroll-indicator span {
            font-size: 0.6rem;
            letter-spacing: 0.3em;
            color: rgba(255,255,255,0.3);
            text-transform: uppercase;
        }

        .scroll-indicator svg {
            width: 20px;
            height: 20px;
            stroke: rgba(255,255,255,0.3);
        }

        @keyframes float {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(10px); }
        }

        /* ===== SECTION STYLES ===== */
        .section {
            min-height: 100vh;
            padding: 120px 5%;
            position: relative;
        }

        .section-header {
            text-align: center;
            margin-bottom: 80px;
        }

        .section-number {
            font-size: 0.7rem;
            letter-spacing: 0.5em;
            color: rgba(255,255,255,0.2);
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 2rem;
            font-weight: 100;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            margin-bottom: 20px;
        }

        .section-subtitle {
            font-size: 0.85rem;
            color: rgba(255,255,255,0.4);
            letter-spacing: 0.2em;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.8;
        }

        /* ===== INTRODUCTION SECTION ===== */
        #introduction {
            background: linear-gradient(180deg, var(--bg-dark) 0%, var(--bg-mid) 100%);
        }

        .intro-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 40px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .intro-card {
            padding: 50px 40px;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.08);
            transition: all 0.5s ease;
            text-align: center;
        }

        .intro-card:hover {
            background: rgba(255,255,255,0.05);
            border-color: rgba(255,255,255,0.15);
            transform: translateY(-10px);
        }

        .intro-card-icon {
            width: 50px;
            height: 50px;
            margin: 0 auto 30px;
            stroke: rgba(255,255,255,0.4);
        }

        .intro-card h3 {
            font-size: 0.9rem;
            font-weight: 300;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            margin-bottom: 20px;
            color: rgba(255,255,255,0.8);
        }

        .intro-card p {
            font-size: 0.85rem;
            line-height: 1.9;
            color: rgba(255,255,255,0.5);
        }

        /* ===== CELL TYPES SECTION ===== */
        #cell-types {
            background: var(--bg-mid);
        }

        .cell-comparison {
            display: grid;
            grid-template-columns: 1fr 100px 1fr;
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto;
            align-items: center;
        }

        .cell-type-card {
            padding: 50px;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.08);
            transition: all 0.5s ease;
        }

        .cell-type-card:hover {
            background: rgba(255,255,255,0.05);
            border-color: rgba(255,255,255,0.15);
        }

        .cell-type-card h3 {
            font-size: 1.2rem;
            font-weight: 200;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            margin-bottom: 25px;
            color: rgba(255,255,255,0.9);
        }

        .cell-type-card p {
            font-size: 0.85rem;
            line-height: 1.9;
            color: rgba(255,255,255,0.5);
            margin-bottom: 25px;
        }

        .cell-features {
            list-style: none;
        }

        .cell-features li {
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            font-size: 0.8rem;
            color: rgba(255,255,255,0.6);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .cell-features li::before {
            content: '';
            width: 6px;
            height: 6px;
            background: rgba(255,255,255,0.3);
        }

        .vs-divider {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 100;
            letter-spacing: 0.3em;
            color: rgba(255,255,255,0.2);
        }

        /* ===== TIMELINE SECTION ===== */
        #timeline {
            background: linear-gradient(180deg, var(--bg-mid) 0%, var(--bg-dark) 100%);
        }

        .timeline-container {
            position: relative;
            max-width: 1000px;
            margin: 0 auto;
        }

        .timeline-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 1px;
            background: rgba(255,255,255,0.15);
            transform: translateX(-50%);
        }

        .timeline-item {
            display: flex;
            margin-bottom: 60px;
            position: relative;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease;
        }

        .timeline-item.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .timeline-item:nth-child(odd) {
            justify-content: flex-start;
            padding-right: calc(50% + 40px);
            text-align: right;
        }

        .timeline-item:nth-child(even) {
            justify-content: flex-end;
            padding-left: calc(50% + 40px);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 25px;
            width: 12px;
            height: 12px;
            background: var(--bg-dark);
            border: 1px solid rgba(255,255,255,0.4);
            transform: translateX(-50%);
            transition: all 0.3s ease;
        }

        .timeline-item:hover::before {
            background: rgba(255,255,255,0.9);
            border-color: rgba(255,255,255,0.9);
        }

        .timeline-content {
            padding: 30px;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.08);
            transition: all 0.4s ease;
            max-width: 400px;
        }

        .timeline-item:hover .timeline-content {
            background: rgba(255,255,255,0.05);
            border-color: rgba(255,255,255,0.15);
        }

        .timeline-year {
            font-size: 1.8rem;
            font-weight: 100;
            color: rgba(255,255,255,0.2);
            margin-bottom: 15px;
        }

        .timeline-content h3 {
            font-size: 0.9rem;
            font-weight: 300;
            letter-spacing: 0.15em;
            margin-bottom: 12px;
            color: rgba(255,255,255,0.9);
        }

        .timeline-content p {
            font-size: 0.8rem;
            line-height: 1.8;
            color: rgba(255,255,255,0.5);
        }

        /* ===== REPRODUCTION METHODS SECTION ===== */
        #reproduction {
            background: var(--bg-dark);
        }

        .repro-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 60px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .repro-card {
            padding: 50px;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.08);
            transition: all 0.5s ease;
        }

        .repro-card:hover {
            background: rgba(255,255,255,0.05);
            border-color: rgba(255,255,255,0.15);
            transform: translateY(-10px);
        }

        .repro-card h3 {
            font-size: 1.1rem;
            font-weight: 200;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            margin-bottom: 25px;
            color: rgba(255,255,255,0.9);
        }

        .repro-card p {
            font-size: 0.85rem;
            line-height: 1.9;
            color: rgba(255,255,255,0.5);
            margin-bottom: 25px;
        }

        .repro-types {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .repro-type {
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            font-size: 0.7rem;
            letter-spacing: 0.1em;
            color: rgba(255,255,255,0.6);
        }

        /* ===== MITOSIS SECTION ===== */
        #mitosis {
            background: linear-gradient(180deg, var(--bg-dark) 0%, var(--bg-mid) 100%);
        }

        .mitosis-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        #divisionCanvas {
            display: block;
            margin: 50px auto;
            border: 1px solid rgba(255,255,255,0.1);
            background: transparent;
        }

        .phase-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .phase-btn {
            padding: 12px 24px;
            background: transparent;
            border: 1px solid rgba(255,255,255,0.2);
            color: rgba(255,255,255,0.5);
            cursor: pointer;
            font-size: 0.75rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            transition: all 0.3s ease;
        }

        .phase-btn:hover, .phase-btn.active {
            background: rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.9);
            border-color: rgba(255,255,255,0.4);
        }

        .phases-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            margin-top: 60px;
        }

        .phase-card {
            padding: 30px 20px;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.08);
            text-align: center;
            transition: all 0.4s ease;
        }

        .phase-card:hover, .phase-card.active {
            background: rgba(255,255,255,0.05);
            border-color: rgba(255,255,255,0.2);
        }

        .phase-visual {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            border: 1px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .phase-card h4 {
            font-size: 0.8rem;
            font-weight: 300;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            margin-bottom: 15px;
            color: rgba(255,255,255,0.8);
        }

        .phase-card p {
            font-size: 0.75rem;
            line-height: 1.7;
            color: rgba(255,255,255,0.5);
        }

        /* ===== ORGANELLES SECTION ===== */
        #organelles {
            background: var(--bg-mid);
        }

        .organelle-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 25px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .organelle-card {
            padding: 35px 30px;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.08);
            transition: all 0.5s ease;
        }

        .organelle-card:hover {
            background: rgba(255,255,255,0.05);
            border-color: rgba(255,255,255,0.15);
            transform: translateY(-5px);
        }

        .organelle-card h4 {
            font-size: 0.85rem;
            font-weight: 300;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            margin-bottom: 15px;
            color: rgba(255,255,255,0.9);
        }

        .organelle-card p {
            font-size: 0.8rem;
            line-height: 1.8;
            color: rgba(255,255,255,0.5);
            margin-bottom: 15px;
        }

        .organelle-card .fact {
            font-size: 0.7rem;
            color: rgba(255,255,255,0.3);
            font-style: italic;
            padding-top: 15px;
            border-top: 1px solid rgba(255,255,255,0.05);
        }

        /* ===== ENERGY SECTION ===== */
        #energy {
            background: linear-gradient(180deg, var(--bg-mid) 0%, var(--bg-dark) 100%);
        }

        .energy-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .energy-visual {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 80px;
        }

        #energyCanvas {
            border: 1px solid rgba(255,255,255,0.1);
        }

        .energy-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 40px;
        }

        .energy-card {
            padding: 40px;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.08);
            transition: all 0.5s ease;
        }

        .energy-card:hover {
            background: rgba(255,255,255,0.05);
            border-color: rgba(255,255,255,0.15);
        }

        .energy-card h4 {
            font-size: 0.9rem;
            font-weight: 300;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            margin-bottom: 20px;
            color: rgba(255,255,255,0.9);
        }

        .energy-card p {
            font-size: 0.8rem;
            line-height: 1.8;
            color: rgba(255,255,255,0.5);
        }

        .energy-equation {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.03);
            font-family: monospace;
            font-size: 0.75rem;
            color: rgba(255,255,255,0.6);
            text-align: center;
            letter-spacing: 0.1em;
        }

        /* ===== GENETICS SECTION ===== */
        #genetics {
            background: var(--bg-dark);
        }

        .genetics-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 80px;
            max-width: 1200px;
            margin: 0 auto;
            align-items: center;
        }

        .genetics-visual {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #dnaCanvas {
            border: 1px solid rgba(255,255,255,0.1);
        }

        .genetics-info h3 {
            font-size: 1.1rem;
            font-weight: 200;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            margin-bottom: 25px;
            color: rgba(255,255,255,0.9);
        }

        .genetics-info p {
            font-size: 0.85rem;
            line-height: 2;
            color: rgba(255,255,255,0.5);
            margin-bottom: 20px;
        }

        .base-pairs {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        .base-pair {
            padding: 20px;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.08);
            text-align: center;
        }

        .base-pair .pair {
            font-size: 1.2rem;
            font-weight: 200;
            letter-spacing: 0.2em;
            color: rgba(255,255,255,0.7);
            margin-bottom: 8px;
        }

        .base-pair .name {
            font-size: 0.65rem;
            letter-spacing: 0.15em;
            color: rgba(255,255,255,0.4);
            text-transform: uppercase;
        }

        /* ===== STATS SECTION ===== */
        #stats {
            padding: 100px 5%;
            background: var(--bg-mid);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .stat-item {
            text-align: center;
            padding: 40px 20px;
            border: 1px solid rgba(255,255,255,0.05);
            transition: all 0.5s ease;
        }

        .stat-item:hover {
            border-color: rgba(255,255,255,0.15);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 100;
            color: rgba(255,255,255,0.9);
            margin-bottom: 15px;
            letter-spacing: 0.1em;
        }

        .stat-label {
            font-size: 0.7rem;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            color: rgba(255,255,255,0.4);
        }

        /* ===== FOOTER ===== */
        footer {
            text-align: center;
            padding: 60px;
            color: rgba(255,255,255,0.3);
            font-size: 0.75rem;
            letter-spacing: 0.3em;
            border-top: 1px solid rgba(255,255,255,0.05);
        }

        /* ===== FOOTER ===== */
        footer {
            padding: 60px 5%;
            background: var(--bg-dark);
            border-top: 1px solid rgba(255,255,255,0.08);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .footer-logo {
            font-size: 1rem;
            font-weight: 100;
            letter-spacing: 0.4em;
            text-transform: uppercase;
        }

        .footer-links {
            display: flex;
            gap: 30px;
        }

        .footer-links a {
            color: rgba(255,255,255,0.4);
            text-decoration: none;
            font-size: 0.7rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: rgba(255,255,255,0.9);
        }

        /* ===== ANIMATIONS ===== */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .slide-left {
            opacity: 0;
            transform: translateX(-50px);
            transition: all 0.8s ease;
        }

        .slide-left.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .slide-right {
            opacity: 0;
            transform: translateX(50px);
            transition: all 0.8s ease;
        }

        .slide-right.visible {
            opacity: 1;
            transform: translateX(0);
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 1200px) {
            .organelle-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .phases-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {
            .side-nav { display: none; }
            
            .intro-grid,
            .repro-grid,
            .energy-grid,
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .cell-comparison {
                grid-template-columns: 1fr;
            }

            .vs-divider {
                padding: 20px 0;
            }

            .genetics-content {
                grid-template-columns: 1fr;
            }

            .phases-grid {
                grid-template-columns: 1fr 1fr;
            }

            .organelle-grid {
                grid-template-columns: 1fr;
            }

            .hero-content {
                padding: 40px 30px;
                max-width: 90%;
            }

            .hero-content h1 {
                font-size: 2rem;
                letter-spacing: 0.4em;
            }

            .section-title {
                font-size: 1.4rem;
                letter-spacing: 0.2em;
            }

            .timeline-item:nth-child(odd),
            .timeline-item:nth-child(even) {
                padding-left: 60px;
                padding-right: 20px;
                justify-content: flex-start;
                text-align: left;
            }

            .timeline-line {
                left: 20px;
            }

            .timeline-item::before {
                left: 20px;
            }

            .footer-content {
                flex-direction: column;
                gap: 30px;
                text-align: center;
            }

            .footer-links {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="main-nav">
        <a href="index.html" class="nav-link active">Evolution</a>
        <a href="extrarepro.html" class="nav-link">ExtraRepro</a>
    </nav>

    <!-- Progress Bar -->
    <div class="progress-bar" id="progressBar"></div>

    <!-- Side Navigation -->
    <nav class="side-nav" id="sideNav">
        <div class="side-nav-item active" data-section="hero" data-label="Home"></div>
        <div class="side-nav-item" data-section="introduction" data-label="Introduction"></div>
        <div class="side-nav-item" data-section="cell-types" data-label="Cell Types"></div>
        <div class="side-nav-item" data-section="timeline" data-label="Timeline"></div>
        <div class="side-nav-item" data-section="reproduction" data-label="Reproduction"></div>
        <div class="side-nav-item" data-section="mitosis" data-label="Mitosis"></div>
        <div class="side-nav-item" data-section="organelles" data-label="Organelles"></div>
        <div class="side-nav-item" data-section="energy" data-label="Energy"></div>
        <div class="side-nav-item" data-section="genetics" data-label="Genetics"></div>
    </nav>

    <!-- Controls -->
    <div class="controls">
        <a href="https://github.com/simplexdomus/repro" target="_blank" rel="noopener" class="control-btn" title="GitHub Repository">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
            </svg>
        </a>
        <button class="control-btn" id="musicBtn" title="Music">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 18V5l12-2v13"/>
                <circle cx="6" cy="18" r="3"/>
                <circle cx="18" cy="16" r="3"/>
            </svg>
        </button>
        <button class="control-btn" id="pauseBtn" title="Pause Animation">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="6" y="4" width="4" height="16"/>
                <rect x="14" y="4" width="4" height="16"/>
            </svg>
        </button>
    </div>

    <div class="volume-slider" id="volumeSlider">
        <span style="font-size: 0.7rem; color: var(--primary);">VOLUME</span>
        <input type="range" id="volumeControl" min="0" max="100" value="30">
    </div>

    <!-- ==================== HERO SECTION ==================== -->
    <section class="hero section" id="hero">
        <canvas id="cellCanvas"></canvas>
        <div class="hero-content fade-in">
            <h1>Repro</h1>
            <p class="tagline">Cellular Evolution & Reproduction</p>
            <p class="intro">
                Witness the fundamental process of life: cell division. From the first
                prokaryotes to the complex multicellular organisms of today,
                reproduction remains the defining characteristic of all living things.
            </p>
        </div>
        <div class="scroll-indicator">
            <span>Explore</span>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M7 13l5 5 5-5M7 6l5 5 5-5"/>
            </svg>
        </div>
    </section>

    <!-- ==================== INTRODUCTION SECTION ==================== -->
    <section class="section" id="introduction">
        <div class="section-header fade-in">
            <div class="section-number">01</div>
            <h2 class="section-title">The Living Cell</h2>
            <p class="section-subtitle">
                The fundamental unit of life — a microscopic universe of organized complexity
            </p>
        </div>

        <div class="intro-grid">
            <div class="intro-card fade-in">
                <svg class="intro-card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                    <circle cx="12" cy="12" r="10"/>
                    <circle cx="12" cy="12" r="4"/>
                    <path d="M12 2v4M12 18v4M2 12h4M18 12h4"/>
                </svg>
                <h3>Unity</h3>
                <p>All living organisms are composed of cells. Whether a single bacterium or a complex human body with 37 trillion cells, the cell remains the basic structural and functional unit of life.</p>
            </div>
            <div class="intro-card fade-in">
                <svg class="intro-card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                    <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                    <path d="M2 17l10 5 10-5"/>
                    <path d="M2 12l10 5 10-5"/>
                </svg>
                <h3>Organization</h3>
                <p>Cells exhibit remarkable internal organization. Membranes create compartments, proteins form molecular machines, and genetic material provides the blueprint for all cellular activities.</p>
            </div>
            <div class="intro-card fade-in">
                <svg class="intro-card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                    <path d="M8 3v4l-4 4 4 4v4"/>
                    <path d="M16 3v4l4 4-4 4v4"/>
                </svg>
                <h3>Reproduction</h3>
                <p>Cells arise only from pre-existing cells. This continuity of life through cell division ensures the faithful transmission of genetic information from one generation to the next.</p>
            </div>
        </div>
    </section>

    <!-- ==================== CELL TYPES SECTION ==================== -->
    <section class="section" id="cell-types">
        <div class="section-header fade-in">
            <div class="section-number">02</div>
            <h2 class="section-title">Prokaryotes vs Eukaryotes</h2>
            <p class="section-subtitle">
                Two fundamental cellular architectures that define the living world
            </p>
        </div>

        <div class="cell-comparison">
            <div class="cell-type-card fade-in">
                <h3>Prokaryotic Cells</h3>
                <p>
                    The original cellular design, appearing approximately 3.8 billion years ago. 
                    Prokaryotes are simpler in structure but incredibly successful, comprising 
                    the majority of Earth's biomass.
                </p>
                <ul class="cell-features">
                    <li>No membrane-bound nucleus</li>
                    <li>Circular DNA in nucleoid region</li>
                    <li>Generally smaller (1-10 μm)</li>
                    <li>Binary fission for reproduction</li>
                    <li>No membrane-bound organelles</li>
                    <li>Includes Bacteria and Archaea</li>
                </ul>
            </div>

            <div class="vs-divider fade-in">VS</div>

            <div class="cell-type-card fade-in">
                <h3>Eukaryotic Cells</h3>
                <p>
                    Complex cells that emerged around 2 billion years ago through endosymbiosis. 
                    Eukaryotes include all plants, animals, fungi, and protists — the diversity 
                    we see in the macroscopic world.
                </p>
                <ul class="cell-features">
                    <li>Membrane-bound nucleus</li>
                    <li>Linear DNA organized in chromosomes</li>
                    <li>Generally larger (10-100 μm)</li>
                    <li>Mitosis and meiosis</li>
                    <li>Complex organelles (mitochondria, ER, Golgi)</li>
                    <li>Includes all complex multicellular life</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- ==================== TIMELINE SECTION ==================== -->
    <section class="section" id="timeline">
        <div class="section-header fade-in">
            <div class="section-number">03</div>
            <h2 class="section-title">Evolutionary Timeline</h2>
            <p class="section-subtitle">
                4.5 billion years of cellular evolution — from chemistry to consciousness
            </p>
        </div>

        <div class="timeline-container">
            <div class="timeline-line"></div>
            
            <div class="timeline-item">
                <div class="timeline-content">
                    <div class="timeline-year">4.5B</div>
                    <h3>Formation of Earth</h3>
                    <p>Planet formation from cosmic dust. Emergence of primordial soup containing organic molecules. Lightning and volcanic activity drive chemical reactions.</p>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-content">
                    <div class="timeline-year">3.8B</div>
                    <h3>First Prokaryotes</h3>
                    <p>Emergence of primitive cells without nucleus. Bacteria and archaea dominate the oceans. The RNA world gives way to DNA-based life.</p>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-content">
                    <div class="timeline-year">2.7B</div>
                    <h3>Photosynthesis</h3>
                    <p>Cyanobacteria develop the ability to photosynthesize. Beginning of oxygen accumulation in the atmosphere. The Great Oxygenation Event transforms Earth.</p>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-content">
                    <div class="timeline-year">2.0B</div>
                    <h3>Eukaryotes Emerge</h3>
                    <p>Development of complex cells with nucleus through endosymbiosis. Mitochondria become integrated. A revolutionary leap in cellular complexity.</p>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-content">
                    <div class="timeline-year">1.2B</div>
                    <h3>Sexual Reproduction</h3>
                    <p>Meiosis enables genetic recombination. Dramatic acceleration of evolutionary diversity. Two become one, then divide into unique offspring.</p>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-content">
                    <div class="timeline-year">600M</div>
                    <h3>Multicellular Life</h3>
                    <p>First complex multicellular life forms. Cell differentiation and specialization begins. Cooperation between cells enables new possibilities.</p>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-content">
                    <div class="timeline-year">540M</div>
                    <h3>Cambrian Explosion</h3>
                    <p>Explosive diversification of life. Emergence of all modern animal phyla. The tree of life branches rapidly in an evolutionary burst.</p>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-content">
                    <div class="timeline-year">Now</div>
                    <h3>Modern Complexity</h3>
                    <p>37 trillion cells in the human body. 200+ specialized cell types working in coordination. Consciousness emerges from cellular cooperation.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== REPRODUCTION SECTION ==================== -->
    <section class="section" id="reproduction">
        <div class="section-header fade-in">
            <div class="section-number">04</div>
            <h2 class="section-title">Reproduction Strategies</h2>
            <p class="section-subtitle">
                From simple division to complex sexual cycles — life's drive to perpetuate
            </p>
        </div>

        <div class="repro-grid">
            <div class="repro-card fade-in">
                <h3>Asexual Reproduction</h3>
                <p>
                    A single organism produces offspring genetically identical to itself. 
                    Fast, efficient, and requires no partner — but limited genetic diversity 
                    makes populations vulnerable to environmental changes.
                </p>
                <div class="repro-types">
                    <span class="repro-type">Binary Fission</span>
                    <span class="repro-type">Budding</span>
                    <span class="repro-type">Fragmentation</span>
                    <span class="repro-type">Sporulation</span>
                    <span class="repro-type">Vegetative Propagation</span>
                </div>
            </div>

            <div class="repro-card fade-in">
                <h3>Sexual Reproduction</h3>
                <p>
                    Two organisms contribute genetic material to produce unique offspring. 
                    Meiosis creates genetic diversity through recombination and independent 
                    assortment — the engine of evolutionary adaptation.
                </p>
                <div class="repro-types">
                    <span class="repro-type">Meiosis</span>
                    <span class="repro-type">Fertilization</span>
                    <span class="repro-type">Gamete Formation</span>
                    <span class="repro-type">Genetic Recombination</span>
                    <span class="repro-type">Zygote Development</span>
                </div>
            </div>

            <div class="repro-card fade-in">
                <h3>Bacterial Conjugation</h3>
                <p>
                    Horizontal gene transfer between bacteria through direct contact. 
                    A pilus forms a bridge for DNA transfer, spreading traits like 
                    antibiotic resistance across populations rapidly.
                </p>
                <div class="repro-types">
                    <span class="repro-type">F-Plasmid Transfer</span>
                    <span class="repro-type">Pilus Formation</span>
                    <span class="repro-type">Hfr Strains</span>
                    <span class="repro-type">Rolling Circle</span>
                </div>
            </div>

            <div class="repro-card fade-in">
                <h3>Viral Replication</h3>
                <p>
                    Viruses hijack cellular machinery to reproduce. Neither truly alive 
                    nor dead, they exist at the boundary of life, dependent on host 
                    cells for their replication cycle.
                </p>
                <div class="repro-types">
                    <span class="repro-type">Lytic Cycle</span>
                    <span class="repro-type">Lysogenic Cycle</span>
                    <span class="repro-type">Reverse Transcription</span>
                    <span class="repro-type">Assembly</span>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== MITOSIS SECTION ==================== -->
    <section class="section" id="mitosis">
        <div class="section-header fade-in">
            <div class="section-number">05</div>
            <h2 class="section-title">Mitosis</h2>
            <p class="section-subtitle">
                The elegant choreography of cell division — one becomes two
            </p>
        </div>

        <div class="mitosis-container">
            <canvas id="divisionCanvas" width="900" height="400"></canvas>
            
            <div class="phase-controls">
                <button class="phase-btn active" data-phase="interphase">Interphase</button>
                <button class="phase-btn" data-phase="prophase">Prophase</button>
                <button class="phase-btn" data-phase="metaphase">Metaphase</button>
                <button class="phase-btn" data-phase="anaphase">Anaphase</button>
                <button class="phase-btn" data-phase="telophase">Telophase</button>
                <button class="phase-btn" data-phase="auto">Automatic</button>
            </div>

            <div class="phases-grid">
                <div class="phase-card fade-in" data-phase="interphase">
                    <div class="phase-visual" id="vis-interphase"></div>
                    <h4>Interphase</h4>
                    <p>Cell growth and DNA replication. The cell prepares for division by duplicating its genome and organelles.</p>
                </div>
                <div class="phase-card fade-in" data-phase="prophase">
                    <div class="phase-visual" id="vis-prophase"></div>
                    <h4>Prophase</h4>
                    <p>Chromatin condenses into visible chromosomes. Nuclear envelope begins to break down. Spindle fibers form.</p>
                </div>
                <div class="phase-card fade-in" data-phase="metaphase">
                    <div class="phase-visual" id="vis-metaphase"></div>
                    <h4>Metaphase</h4>
                    <p>Chromosomes align at the cell's equator. Spindle fibers attach to kinetochores. The checkpoint ensures proper attachment.</p>
                </div>
                <div class="phase-card fade-in" data-phase="anaphase">
                    <div class="phase-visual" id="vis-anaphase"></div>
                    <h4>Anaphase</h4>
                    <p>Sister chromatids separate and move to opposite poles. Motor proteins walk along microtubules, pulling chromosomes apart.</p>
                </div>
                <div class="phase-card fade-in" data-phase="telophase">
                    <div class="phase-visual" id="vis-telophase"></div>
                    <h4>Telophase</h4>
                    <p>Nuclear envelopes reform around each set of chromosomes. Cytokinesis divides the cytoplasm. Two daughter cells emerge.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== ORGANELLES SECTION ==================== -->
    <section class="section" id="organelles">
        <div class="section-header fade-in">
            <div class="section-number">06</div>
            <h2 class="section-title">Cellular Machinery</h2>
            <p class="section-subtitle">
                Specialized compartments that perform the essential functions of life
            </p>
        </div>

        <div class="organelle-grid">
            <div class="organelle-card fade-in">
                <h4>Nucleus</h4>
                <p>The control center housing genetic material. Double membrane with nuclear pores for selective molecular transport.</p>
                <div class="fact">Contains ~2 meters of DNA packed into 46 chromosomes</div>
            </div>
            <div class="organelle-card fade-in">
                <h4>Mitochondria</h4>
                <p>Powerhouses of the cell, producing ATP through oxidative phosphorylation. Contains its own circular DNA.</p>
                <div class="fact">Generates ~90% of cellular ATP through electron transport</div>
            </div>
            <div class="organelle-card fade-in">
                <h4>Endoplasmic Reticulum</h4>
                <p>Network of membranes for protein (rough ER) and lipid (smooth ER) synthesis. Connected to nuclear envelope.</p>
                <div class="fact">Rough ER can have up to 13 million ribosomes per cell</div>
            </div>
            <div class="organelle-card fade-in">
                <h4>Golgi Apparatus</h4>
                <p>Processing and packaging center. Modifies proteins and lipids, sorts and packages them for transport.</p>
                <div class="fact">Processes approximately 10,000 protein molecules per minute</div>
            </div>
            <div class="organelle-card fade-in">
                <h4>Lysosomes</h4>
                <p>Digestive compartments with hydrolytic enzymes. Break down macromolecules, old organelles, and pathogens.</p>
                <div class="fact">Maintain acidic pH of 4.5-5.0 for enzyme activity</div>
            </div>
            <div class="organelle-card fade-in">
                <h4>Ribosomes</h4>
                <p>Molecular machines for protein synthesis. Composed of rRNA and proteins, found free or bound to ER.</p>
                <div class="fact">A single cell can contain up to 10 million ribosomes</div>
            </div>
            <div class="organelle-card fade-in">
                <h4>Cytoskeleton</h4>
                <p>Dynamic network of protein filaments. Provides structure, enables movement, organizes components.</p>
                <div class="fact">Microtubules, actin filaments, and intermediate filaments</div>
            </div>
            <div class="organelle-card fade-in">
                <h4>Cell Membrane</h4>
                <p>Phospholipid bilayer boundary. Regulates transport, receives signals, maintains cellular identity.</p>
                <div class="fact">Contains thousands of different protein types embedded within</div>
            </div>
        </div>
    </section>

    <!-- ==================== ENERGY SECTION ==================== -->
    <section class="section" id="energy">
        <div class="section-header fade-in">
            <div class="section-number">07</div>
            <h2 class="section-title">Cellular Energy</h2>
            <p class="section-subtitle">
                ATP — the universal energy currency powering all life processes
            </p>
        </div>

        <div class="energy-container">
            <div class="energy-visual fade-in">
                <canvas id="energyCanvas" width="800" height="300"></canvas>
            </div>

            <div class="energy-grid">
                <div class="energy-card fade-in">
                    <h4>Glycolysis</h4>
                    <p>The ancient pathway breaking glucose into pyruvate. Occurs in the cytoplasm without oxygen requirement. Produces 2 ATP per glucose molecule.</p>
                    <div class="energy-equation">C₆H₁₂O₆ → 2 Pyruvate + 2 ATP + 2 NADH</div>
                </div>
                <div class="energy-card fade-in">
                    <h4>Krebs Cycle</h4>
                    <p>The citric acid cycle in mitochondrial matrix. Oxidizes acetyl-CoA, releasing CO₂ and capturing energy in electron carriers.</p>
                    <div class="energy-equation">Acetyl-CoA → 2 CO₂ + 3 NADH + FADH₂ + ATP</div>
                </div>
                <div class="energy-card fade-in">
                    <h4>Electron Transport</h4>
                    <p>The final stage on inner mitochondrial membrane. Electrons flow through protein complexes, driving ATP synthesis.</p>
                    <div class="energy-equation">NADH + O₂ → H₂O + ~2.5 ATP per NADH</div>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== GENETICS SECTION ==================== -->
    <section class="section" id="genetics">
        <div class="section-header fade-in">
            <div class="section-number">08</div>
            <h2 class="section-title">The Genetic Code</h2>
            <p class="section-subtitle">
                DNA — the molecular blueprint encoding the instructions for life
            </p>
        </div>

        <div class="genetics-content">
            <div class="genetics-visual slide-left">
                <canvas id="dnaCanvas" width="400" height="500"></canvas>
            </div>
            <div class="genetics-info slide-right">
                <h3>The Double Helix</h3>
                <p>
                    Deoxyribonucleic acid (DNA) is a polymer of nucleotides. Each nucleotide 
                    contains a phosphate group, a deoxyribose sugar, and one of four 
                    nitrogenous bases: Adenine, Thymine, Guanine, or Cytosine.
                </p>
                <p>
                    The two strands run antiparallel, with complementary base pairing: 
                    Adenine with Thymine (2 hydrogen bonds), Guanine with Cytosine 
                    (3 hydrogen bonds). This specificity enables faithful replication.
                </p>
                <p>
                    The human genome contains approximately 3 billion base pairs, 
                    encoding roughly 20,000 protein-coding genes. Yet only about 
                    1.5% of DNA directly codes for proteins — the rest plays regulatory 
                    and structural roles we are still discovering.
                </p>

                <div class="base-pairs">
                    <div class="base-pair">
                        <div class="pair">A ═ T</div>
                        <div class="name">Adenine — Thymine</div>
                    </div>
                    <div class="base-pair">
                        <div class="pair">G ≡ C</div>
                        <div class="name">Guanine — Cytosine</div>
                    </div>
                    <div class="base-pair">
                        <div class="pair">5' → 3'</div>
                        <div class="name">Leading Strand</div>
                    </div>
                    <div class="base-pair">
                        <div class="pair">3' ← 5'</div>
                        <div class="name">Lagging Strand</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== STATS SECTION ==================== -->
    <section id="stats">
        <div class="stats-grid">
            <div class="stat-item fade-in">
                <div class="stat-number">37T</div>
                <div class="stat-label">Cells in Human Body</div>
            </div>
            <div class="stat-item fade-in">
                <div class="stat-number">3B</div>
                <div class="stat-label">Base Pairs in DNA</div>
            </div>
            <div class="stat-item fade-in">
                <div class="stat-number">200+</div>
                <div class="stat-label">Cell Types</div>
            </div>
            <div class="stat-item fade-in">
                <div class="stat-number">3.8B</div>
                <div class="stat-label">Years of Evolution</div>
            </div>
        </div>
    </section>

    <!-- ==================== FOOTER ==================== -->
    <footer>
        <div class="footer-content">
            <div class="footer-logo">Repro</div>
            <div class="footer-links">
                <a href="extrarepro.html">ExtraRepro</a>
                <a href="#hero">Back to Top</a>
                <a href="https://github.com/simplexdomus/repro" target="_blank">GitHub</a>
            </div>
        </div>
    </footer>

    <script>
        // ===== CANVAS SETUP =====
        const heroCanvas = document.getElementById('cellCanvas');
        const heroCtx = heroCanvas.getContext('2d');
        const divCanvas = document.getElementById('divisionCanvas');
        const divCtx = divCanvas.getContext('2d');
        const dnaCanvas = document.getElementById('dnaCanvas');
        const dnaCtx = dnaCanvas.getContext('2d');
        const energyCanvas = document.getElementById('energyCanvas');
        const energyCtx = energyCanvas.getContext('2d');

        let isPaused = false;
        let audioContext = null;
        let isPlaying = false;
        let gainNode = null;
        let oscillators = [];
        let globalTime = 0;

        // ===== FLOATING CELLS SYSTEM =====
        const floatingCells = [];
        const numCells = 60;

        class FloatingCell {
            constructor() {
                this.reset();
            }

            reset() {
                this.x = Math.random() * window.innerWidth;
                this.y = Math.random() * window.innerHeight;
                this.radius = 15 + Math.random() * 40;
                this.vx = (Math.random() - 0.5) * 0.3;
                this.vy = (Math.random() - 0.5) * 0.3;
                this.nucleusRatio = 0.25 + Math.random() * 0.15;
                this.alpha = 0.1 + Math.random() * 0.15;
                this.pulseSpeed = 0.001 + Math.random() * 0.002;
                this.pulseOffset = Math.random() * Math.PI * 2;
                this.organelleCount = Math.floor(3 + Math.random() * 8);
                this.organelles = [];
                for (let i = 0; i < this.organelleCount; i++) {
                    this.organelles.push({
                        angle: Math.random() * Math.PI * 2,
                        dist: 0.4 + Math.random() * 0.35,
                        size: 0.03 + Math.random() * 0.05,
                        speed: (Math.random() - 0.5) * 0.0005
                    });
                }
                // Some cells are dividing
                this.isDividing = Math.random() < 0.08;
                this.divisionProgress = Math.random();
                this.divisionSpeed = 0.0002 + Math.random() * 0.0003;
            }

            update(time) {
                // Gentle floating movement
                this.x += this.vx;
                this.y += this.vy;

                // Subtle drift changes
                this.vx += (Math.random() - 0.5) * 0.01;
                this.vy += (Math.random() - 0.5) * 0.01;
                this.vx *= 0.99;
                this.vy *= 0.99;

                // Wrap around screen
                const margin = this.radius * 2;
                if (this.x < -margin) this.x = window.innerWidth + margin;
                if (this.x > window.innerWidth + margin) this.x = -margin;
                if (this.y < -margin) this.y = window.innerHeight + margin;
                if (this.y > window.innerHeight + margin) this.y = -margin;

                // Update organelle positions
                for (let org of this.organelles) {
                    org.angle += org.speed;
                }

                // Division animation
                if (this.isDividing) {
                    this.divisionProgress += this.divisionSpeed;
                    if (this.divisionProgress >= 1) {
                        this.isDividing = false;
                        this.divisionProgress = 0;
                        // Maybe start dividing again later
                        if (Math.random() < 0.3) {
                            this.isDividing = true;
                        }
                    }
                } else if (Math.random() < 0.0001) {
                    this.isDividing = true;
                    this.divisionProgress = 0;
                }
            }

            draw(ctx, time) {
                const pulse = 1 + Math.sin(time * this.pulseSpeed + this.pulseOffset) * 0.03;
                const r = this.radius * pulse;

                if (this.isDividing && this.divisionProgress > 0.3) {
                    // Draw dividing cell
                    this.drawDividingCell(ctx, time, r);
                } else {
                    // Draw normal cell
                    this.drawNormalCell(ctx, time, r);
                }
            }

            drawNormalCell(ctx, time, r) {
                // Cell membrane
                ctx.beginPath();
                ctx.arc(this.x, this.y, r, 0, Math.PI * 2);
                ctx.strokeStyle = `rgba(255,255,255,${this.alpha})`;
                ctx.lineWidth = 1;
                ctx.stroke();

                // Nucleus
                ctx.beginPath();
                ctx.arc(this.x, this.y, r * this.nucleusRatio, 0, Math.PI * 2);
                ctx.strokeStyle = `rgba(255,255,255,${this.alpha * 0.6})`;
                ctx.stroke();

                // Organelles (small dots floating inside)
                for (let org of this.organelles) {
                    const ox = this.x + Math.cos(org.angle) * r * org.dist;
                    const oy = this.y + Math.sin(org.angle) * r * org.dist;
                    ctx.beginPath();
                    ctx.arc(ox, oy, r * org.size, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(255,255,255,${this.alpha * 0.4})`;
                    ctx.fill();
                }

                // Chromatin dots in nucleus
                const chromatinCount = Math.floor(r / 8);
                for (let i = 0; i < chromatinCount; i++) {
                    const angle = (i / chromatinCount) * Math.PI * 2 + time * 0.0003;
                    const dist = r * this.nucleusRatio * 0.5 * (0.3 + (i % 3) * 0.25);
                    const cx = this.x + Math.cos(angle) * dist;
                    const cy = this.y + Math.sin(angle) * dist;
                    ctx.beginPath();
                    ctx.arc(cx, cy, 1, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(255,255,255,${this.alpha * 0.3})`;
                    ctx.fill();
                }
            }

            drawDividingCell(ctx, time, r) {
                const progress = this.divisionProgress;
                const separation = progress * r * 0.8;
                const pinch = Math.sin(progress * Math.PI) * r * 0.4;
                
                // Early division - elongating
                if (progress < 0.6) {
                    const elongation = progress * 0.5;
                    ctx.beginPath();
                    ctx.ellipse(this.x, this.y, r * (1 + elongation), r * (1 - elongation * 0.3), 0, 0, Math.PI * 2);
                    ctx.strokeStyle = `rgba(255,255,255,${this.alpha})`;
                    ctx.lineWidth = 1;
                    ctx.stroke();

                    // Two nuclei forming
                    const nucSep = progress * r * 0.5;
                    ctx.beginPath();
                    ctx.arc(this.x - nucSep, this.y, r * this.nucleusRatio * (1 - progress * 0.3), 0, Math.PI * 2);
                    ctx.strokeStyle = `rgba(255,255,255,${this.alpha * 0.5})`;
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.arc(this.x + nucSep, this.y, r * this.nucleusRatio * (1 - progress * 0.3), 0, Math.PI * 2);
                    ctx.stroke();
                } else {
                    // Late division - pinching
                    const splitProgress = (progress - 0.6) / 0.4;
                    const newR = r * 0.7;
                    const finalSep = r * 0.6 + splitProgress * r * 0.5;
                    
                    // Two daughter cells
                    ctx.beginPath();
                    ctx.arc(this.x - finalSep, this.y, newR, 0, Math.PI * 2);
                    ctx.strokeStyle = `rgba(255,255,255,${this.alpha})`;
                    ctx.stroke();
                    
                    ctx.beginPath();
                    ctx.arc(this.x + finalSep, this.y, newR, 0, Math.PI * 2);
                    ctx.stroke();

                    // Connection bridge (fading)
                    if (splitProgress < 0.7) {
                        ctx.beginPath();
                        ctx.moveTo(this.x - finalSep + newR, this.y);
                        ctx.lineTo(this.x + finalSep - newR, this.y);
                        ctx.strokeStyle = `rgba(255,255,255,${this.alpha * (1 - splitProgress / 0.7) * 0.5})`;
                        ctx.stroke();
                    }

                    // Nuclei in daughter cells
                    ctx.beginPath();
                    ctx.arc(this.x - finalSep, this.y, newR * this.nucleusRatio, 0, Math.PI * 2);
                    ctx.strokeStyle = `rgba(255,255,255,${this.alpha * 0.5})`;
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.arc(this.x + finalSep, this.y, newR * this.nucleusRatio, 0, Math.PI * 2);
                    ctx.stroke();
                }
            }
        }

        // Initialize floating cells
        for (let i = 0; i < numCells; i++) {
            floatingCells.push(new FloatingCell());
        }

        // ===== HERO CANVAS RESIZE =====
        function resizeHeroCanvas() {
            heroCanvas.width = window.innerWidth;
            heroCanvas.height = window.innerHeight;
        }
        resizeHeroCanvas();
        window.addEventListener('resize', resizeHeroCanvas);

        // ===== HERO FLOATING CELLS ANIMATION =====
        function drawHeroCell(time) {
            heroCtx.clearRect(0, 0, heroCanvas.width, heroCanvas.height);

            // Update and draw all floating cells
            for (let cell of floatingCells) {
                cell.update(time);
                cell.draw(heroCtx, time);
            }

            // Draw subtle connection lines between nearby cells
            for (let i = 0; i < floatingCells.length; i++) {
                for (let j = i + 1; j < floatingCells.length; j++) {
                    const cellA = floatingCells[i];
                    const cellB = floatingCells[j];
                    const dx = cellA.x - cellB.x;
                    const dy = cellA.y - cellB.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    const maxDist = 150;
                    
                    if (dist < maxDist) {
                        const alpha = (1 - dist / maxDist) * 0.05;
                        heroCtx.beginPath();
                        heroCtx.moveTo(cellA.x, cellA.y);
                        heroCtx.lineTo(cellB.x, cellB.y);
                        heroCtx.strokeStyle = `rgba(255,255,255,${alpha})`;
                        heroCtx.lineWidth = 0.5;
                        heroCtx.stroke();
                    }
                }
            }
        }

        // ===== DNA HELIX ANIMATION =====
        function drawDNAHelix(time) {
            dnaCtx.clearRect(0, 0, dnaCanvas.width, dnaCanvas.height);
            
            const cx = dnaCanvas.width / 2;
            const amplitude = 80;
            const frequency = 0.03;
            const speed = 0.002;
            
            for (let y = 30; y < dnaCanvas.height - 30; y += 20) {
                const phase = y * frequency + time * speed;
                
                const x1 = cx + Math.sin(phase) * amplitude;
                const x2 = cx + Math.sin(phase + Math.PI) * amplitude;
                
                const depth1 = (Math.cos(phase) + 1) / 2;
                const depth2 = (Math.cos(phase + Math.PI) + 1) / 2;
                
                // Base pair connection
                dnaCtx.beginPath();
                dnaCtx.moveTo(x1, y);
                dnaCtx.lineTo(x2, y);
                dnaCtx.strokeStyle = `rgba(255,255,255,${0.1 + depth1 * 0.1})`;
                dnaCtx.lineWidth = 1;
                dnaCtx.stroke();
                
                // Backbone strand 1
                if (y > 30) {
                    const prevPhase = (y - 20) * frequency + time * speed;
                    const prevX1 = cx + Math.sin(prevPhase) * amplitude;
                    
                    dnaCtx.beginPath();
                    dnaCtx.moveTo(prevX1, y - 20);
                    dnaCtx.lineTo(x1, y);
                    dnaCtx.strokeStyle = `rgba(255,255,255,${0.3 + depth1 * 0.3})`;
                    dnaCtx.lineWidth = 2;
                    dnaCtx.stroke();
                    
                    const prevX2 = cx + Math.sin(prevPhase + Math.PI) * amplitude;
                    dnaCtx.beginPath();
                    dnaCtx.moveTo(prevX2, y - 20);
                    dnaCtx.lineTo(x2, y);
                    dnaCtx.strokeStyle = `rgba(255,255,255,${0.3 + depth2 * 0.3})`;
                    dnaCtx.stroke();
                }
                
                // Nucleotide dots
                dnaCtx.beginPath();
                dnaCtx.arc(x1, y, 4 + depth1 * 2, 0, Math.PI * 2);
                dnaCtx.fillStyle = `rgba(255,255,255,${0.4 + depth1 * 0.4})`;
                dnaCtx.fill();
                
                dnaCtx.beginPath();
                dnaCtx.arc(x2, y, 4 + depth2 * 2, 0, Math.PI * 2);
                dnaCtx.fillStyle = `rgba(255,255,255,${0.4 + depth2 * 0.4})`;
                dnaCtx.fill();
            }
        }

        // ===== ENERGY ANIMATION =====
        function drawEnergyFlow(time) {
            energyCtx.clearRect(0, 0, energyCanvas.width, energyCanvas.height);
            
            // ATP molecules flowing
            const numParticles = 30;
            for (let i = 0; i < numParticles; i++) {
                const progress = ((time * 0.001 + i / numParticles) % 1);
                const x = progress * energyCanvas.width;
                const y = energyCanvas.height / 2 + Math.sin(progress * Math.PI * 4 + i) * 50;
                
                // ATP glow
                const gradient = energyCtx.createRadialGradient(x, y, 0, x, y, 20);
                gradient.addColorStop(0, 'rgba(255,255,255,0.3)');
                gradient.addColorStop(1, 'rgba(255,255,255,0)');
                
                energyCtx.beginPath();
                energyCtx.arc(x, y, 20, 0, Math.PI * 2);
                energyCtx.fillStyle = gradient;
                energyCtx.fill();
                
                // Core
                energyCtx.beginPath();
                energyCtx.arc(x, y, 4, 0, Math.PI * 2);
                energyCtx.fillStyle = 'rgba(255,255,255,0.6)';
                energyCtx.fill();
            }

            // Mitochondria outline
            energyCtx.beginPath();
            energyCtx.ellipse(energyCanvas.width / 2, energyCanvas.height / 2, 150, 80, 0, 0, Math.PI * 2);
            energyCtx.strokeStyle = 'rgba(255,255,255,0.2)';
            energyCtx.lineWidth = 2;
            energyCtx.stroke();

            // Cristae
            for (let i = 0; i < 5; i++) {
                const x = energyCanvas.width / 2 - 100 + i * 50;
                energyCtx.beginPath();
                energyCtx.moveTo(x, energyCanvas.height / 2 - 60);
                energyCtx.bezierCurveTo(
                    x + 20, energyCanvas.height / 2 - 30,
                    x + 20, energyCanvas.height / 2 + 30,
                    x, energyCanvas.height / 2 + 60
                );
                energyCtx.strokeStyle = 'rgba(255,255,255,0.15)';
                energyCtx.lineWidth = 1;
                energyCtx.stroke();
            }
        }

        // ===== DIVISION CANVAS =====
        let currentPhase = 'interphase';
        let autoMode = false;
        let autoPhaseTime = 0;
        const phases = ['interphase', 'prophase', 'metaphase', 'anaphase', 'telophase'];

        function drawDivisionCanvas(time) {
            divCtx.clearRect(0, 0, divCanvas.width, divCanvas.height);
            
            if (autoMode) {
                autoPhaseTime++;
                if (autoPhaseTime > 120) {
                    autoPhaseTime = 0;
                    const currentIndex = phases.indexOf(currentPhase);
                    currentPhase = phases[(currentIndex + 1) % phases.length];
                    updatePhaseButtons();
                }
            }

            const cx = divCanvas.width / 2;
            const cy = divCanvas.height / 2;
            const radius = 120;

            switch(currentPhase) {
                case 'interphase':
                    drawInterphase(cx, cy, radius, time);
                    break;
                case 'prophase':
                    drawProphase(cx, cy, radius, time);
                    break;
                case 'metaphase':
                    drawMetaphase(cx, cy, radius, time);
                    break;
                case 'anaphase':
                    drawAnaphaseSmall(cx, cy, radius, time);
                    break;
                case 'telophase':
                    drawTelophaseSmall(cx, cy, radius, time);
                    break;
            }
        }

        function drawInterphase(cx, cy, radius, time) {
            // Cell membrane
            divCtx.beginPath();
            divCtx.arc(cx, cy, radius, 0, Math.PI * 2);
            divCtx.strokeStyle = 'rgba(255,255,255,0.4)';
            divCtx.lineWidth = 2;
            divCtx.stroke();

            // Nucleus
            divCtx.beginPath();
            divCtx.arc(cx, cy, radius * 0.4, 0, Math.PI * 2);
            divCtx.strokeStyle = 'rgba(255,255,255,0.25)';
            divCtx.stroke();

            // Chromatin (loose DNA)
            for (let i = 0; i < 40; i++) {
                const angle = (i / 40) * Math.PI * 2 + time * 0.001;
                const dist = Math.random() * radius * 0.3;
                const x = cx + Math.cos(angle) * dist;
                const y = cy + Math.sin(angle) * dist;
                
                divCtx.beginPath();
                divCtx.arc(x, y, 2, 0, Math.PI * 2);
                divCtx.fillStyle = 'rgba(255,255,255,0.2)';
                divCtx.fill();
            }

            // Centrioles
            divCtx.fillStyle = 'rgba(255,255,255,0.3)';
            divCtx.fillRect(cx + radius * 0.5, cy - 5, 8, 10);
        }

        function drawProphase(cx, cy, radius, time) {
            divCtx.beginPath();
            divCtx.arc(cx, cy, radius, 0, Math.PI * 2);
            divCtx.strokeStyle = 'rgba(255,255,255,0.4)';
            divCtx.lineWidth = 2;
            divCtx.stroke();

            // Dissolving nucleus
            divCtx.beginPath();
            divCtx.arc(cx, cy, radius * 0.4, 0, Math.PI * 2);
            divCtx.setLineDash([5, 5]);
            divCtx.strokeStyle = 'rgba(255,255,255,0.15)';
            divCtx.stroke();
            divCtx.setLineDash([]);

            // Condensed chromosomes
            for (let i = 0; i < 8; i++) {
                const angle = (i / 8) * Math.PI * 2 + time * 0.002;
                const dist = radius * 0.25;
                const x = cx + Math.cos(angle) * dist;
                const y = cy + Math.sin(angle) * dist;
                drawSmallChromosome(x, y, angle);
            }

            // Centrosomes moving apart
            divCtx.beginPath();
            divCtx.arc(cx - radius * 0.7, cy, 6, 0, Math.PI * 2);
            divCtx.fillStyle = 'rgba(255,255,255,0.4)';
            divCtx.fill();
            
            divCtx.beginPath();
            divCtx.arc(cx + radius * 0.7, cy, 6, 0, Math.PI * 2);
            divCtx.fill();
        }

        function drawMetaphase(cx, cy, radius, time) {
            divCtx.beginPath();
            divCtx.arc(cx, cy, radius, 0, Math.PI * 2);
            divCtx.strokeStyle = 'rgba(255,255,255,0.4)';
            divCtx.lineWidth = 2;
            divCtx.stroke();

            // Spindle fibers
            for (let i = 0; i < 8; i++) {
                const y = cy + (i - 4) * 12;
                divCtx.beginPath();
                divCtx.moveTo(cx - radius * 0.85, cy);
                divCtx.lineTo(cx, y);
                divCtx.lineTo(cx + radius * 0.85, cy);
                divCtx.strokeStyle = 'rgba(255,255,255,0.1)';
                divCtx.lineWidth = 1;
                divCtx.stroke();
            }

            // Chromosomes aligned at metaphase plate
            for (let i = 0; i < 8; i++) {
                const y = cy + (i - 3.5) * 12;
                drawSmallChromosome(cx, y, Math.PI / 2);
            }

            // Centrosomes at poles
            divCtx.beginPath();
            divCtx.arc(cx - radius * 0.85, cy, 8, 0, Math.PI * 2);
            divCtx.fillStyle = 'rgba(255,255,255,0.4)';
            divCtx.fill();
            
            divCtx.beginPath();
            divCtx.arc(cx + radius * 0.85, cy, 8, 0, Math.PI * 2);
            divCtx.fill();
        }

        function drawAnaphaseSmall(cx, cy, radius, time) {
            // Elongated cell
            divCtx.beginPath();
            divCtx.ellipse(cx, cy, radius * 1.2, radius * 0.9, 0, 0, Math.PI * 2);
            divCtx.strokeStyle = 'rgba(255,255,255,0.4)';
            divCtx.lineWidth = 2;
            divCtx.stroke();

            // Spindle fibers
            for (let i = 0; i < 8; i++) {
                divCtx.beginPath();
                divCtx.moveTo(cx - radius, cy);
                divCtx.lineTo(cx - radius * 0.4, cy + (i - 4) * 8);
                divCtx.strokeStyle = 'rgba(255,255,255,0.08)';
                divCtx.stroke();
                
                divCtx.beginPath();
                divCtx.moveTo(cx + radius, cy);
                divCtx.lineTo(cx + radius * 0.4, cy + (i - 4) * 8);
                divCtx.stroke();
            }

            // Separated chromatids moving to poles
            for (let i = 0; i < 8; i++) {
                const y = cy + (i - 3.5) * 8;
                // Left set
                drawSingleChromatid(cx - radius * 0.4, y);
                // Right set
                drawSingleChromatid(cx + radius * 0.4, y);
            }
        }

        function drawTelophaseSmall(cx, cy, radius, time) {
            // Two forming cells
            divCtx.beginPath();
            divCtx.arc(cx - radius * 0.6, cy, radius * 0.7, 0, Math.PI * 2);
            divCtx.strokeStyle = 'rgba(255,255,255,0.4)';
            divCtx.lineWidth = 2;
            divCtx.stroke();
            
            divCtx.beginPath();
            divCtx.arc(cx + radius * 0.6, cy, radius * 0.7, 0, Math.PI * 2);
            divCtx.stroke();

            // Cleavage furrow
            divCtx.beginPath();
            divCtx.moveTo(cx, cy - radius * 0.3);
            divCtx.lineTo(cx, cy + radius * 0.3);
            divCtx.strokeStyle = 'rgba(255,255,255,0.3)';
            divCtx.setLineDash([4, 4]);
            divCtx.stroke();
            divCtx.setLineDash([]);

            // Reforming nuclei
            divCtx.beginPath();
            divCtx.arc(cx - radius * 0.6, cy, radius * 0.25, 0, Math.PI * 2);
            divCtx.strokeStyle = 'rgba(255,255,255,0.2)';
            divCtx.stroke();
            
            divCtx.beginPath();
            divCtx.arc(cx + radius * 0.6, cy, radius * 0.25, 0, Math.PI * 2);
            divCtx.stroke();

            // Decondensing chromosomes
            for (let i = 0; i < 20; i++) {
                const angle = (i / 20) * Math.PI * 2;
                const dist = Math.random() * radius * 0.2;
                
                const x1 = cx - radius * 0.6 + Math.cos(angle) * dist;
                const y1 = cy + Math.sin(angle) * dist;
                divCtx.beginPath();
                divCtx.arc(x1, y1, 1.5, 0, Math.PI * 2);
                divCtx.fillStyle = 'rgba(255,255,255,0.2)';
                divCtx.fill();
                
                const x2 = cx + radius * 0.6 + Math.cos(angle) * dist;
                const y2 = cy + Math.sin(angle) * dist;
                divCtx.beginPath();
                divCtx.arc(x2, y2, 1.5, 0, Math.PI * 2);
                divCtx.fill();
            }
        }

        function drawSmallChromosome(x, y, angle) {
            divCtx.save();
            divCtx.translate(x, y);
            divCtx.rotate(angle);
            
            divCtx.beginPath();
            divCtx.moveTo(-3, -8);
            divCtx.lineTo(-3, 8);
            divCtx.moveTo(3, -8);
            divCtx.lineTo(3, 8);
            divCtx.moveTo(-3, 0);
            divCtx.lineTo(3, 0);
            divCtx.strokeStyle = 'rgba(255,255,255,0.5)';
            divCtx.lineWidth = 2;
            divCtx.stroke();
            
            divCtx.restore();
        }

        function drawSingleChromatid(x, y) {
            divCtx.beginPath();
            divCtx.moveTo(x, y - 6);
            divCtx.lineTo(x, y + 6);
            divCtx.strokeStyle = 'rgba(255,255,255,0.5)';
            divCtx.lineWidth = 2;
            divCtx.stroke();
        }

        function updatePhaseButtons() {
            document.querySelectorAll('.phase-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.phase === currentPhase || (autoMode && btn.dataset.phase === 'auto')) {
                    btn.classList.add('active');
                }
            });
            
            document.querySelectorAll('.phase-card').forEach(card => {
                card.classList.remove('active');
                if (card.dataset.phase === currentPhase) {
                    card.classList.add('active');
                }
            });
        }

        // Phase button listeners
        document.querySelectorAll('.phase-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                if (btn.dataset.phase === 'auto') {
                    autoMode = !autoMode;
                    autoPhaseTime = 0;
                } else {
                    autoMode = false;
                    currentPhase = btn.dataset.phase;
                }
                updatePhaseButtons();
            });
        });

        // ===== MAIN ANIMATION LOOP =====
        function animate() {
            if (!isPaused) {
                globalTime++;
                drawHeroCell(globalTime);
                drawDivisionCanvas(globalTime);
                drawDNAHelix(globalTime);
                drawEnergyFlow(globalTime);
            }
            requestAnimationFrame(animate);
        }
        animate();

        // ===== AUDIO SYSTEM =====
        function createAmbientAudio() {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            gainNode = audioContext.createGain();
            gainNode.connect(audioContext.destination);
            gainNode.gain.value = 0.03;

            const frequencies = [65.41, 82.41, 98.00, 130.81, 164.81];
            
            frequencies.forEach((freq, i) => {
                const osc = audioContext.createOscillator();
                const oscGain = audioContext.createGain();
                const filter = audioContext.createBiquadFilter();
                
                osc.type = 'sine';
                osc.frequency.value = freq;
                
                filter.type = 'lowpass';
                filter.frequency.value = 400;
                filter.Q.value = 1;
                
                oscGain.gain.value = 0.1;
                
                osc.connect(filter);
                filter.connect(oscGain);
                oscGain.connect(gainNode);
                
                osc.start();
                oscillators.push({ osc, oscGain, filter });

                // Slow modulation
                setInterval(() => {
                    const newFreq = freq * (0.98 + Math.random() * 0.04);
                    osc.frequency.exponentialRampToValueAtTime(newFreq, audioContext.currentTime + 2);
                    oscGain.gain.linearRampToValueAtTime(0.05 + Math.random() * 0.1, audioContext.currentTime + 2);
                }, 3000 + i * 1000);
            });
        }

        // Controls
        const musicBtn = document.getElementById('musicBtn');
        const volumeSlider = document.getElementById('volumeSlider');
        const volumeControl = document.getElementById('volumeControl');

        musicBtn.addEventListener('click', () => {
            if (!isPlaying) {
                if (!audioContext) createAmbientAudio();
                if (audioContext.state === 'suspended') audioContext.resume();
                isPlaying = true;
                musicBtn.classList.add('active');
                volumeSlider.classList.add('visible');
            } else {
                if (audioContext) audioContext.suspend();
                isPlaying = false;
                musicBtn.classList.remove('active');
                volumeSlider.classList.remove('visible');
            }
        });

        volumeControl.addEventListener('input', (e) => {
            if (gainNode) gainNode.gain.value = e.target.value / 1000;
        });

        const pauseBtn = document.getElementById('pauseBtn');
        pauseBtn.addEventListener('click', () => {
            isPaused = !isPaused;
            pauseBtn.classList.toggle('active');
        });

        // ===== SCROLL EFFECTS =====
        const heroContent = document.querySelector('.hero-content');
        const scrollIndicator = document.querySelector('.scroll-indicator');
        const progressBar = document.getElementById('progressBar');

        window.addEventListener('scroll', () => {
            const scrollY = window.scrollY;
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const progress = (scrollY / docHeight) * 100;
            progressBar.style.width = progress + '%';
            
            if (scrollY > 100) {
                heroContent.classList.add('hidden');
                if (scrollIndicator) scrollIndicator.style.opacity = '0';
            } else {
                heroContent.classList.remove('hidden');
                if (scrollIndicator) scrollIndicator.style.opacity = '1';
            }
        });

        // ===== INTERSECTION OBSERVER =====
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.fade-in, .slide-left, .slide-right, .timeline-item').forEach(el => {
            observer.observe(el);
        });

        // ===== SIDE NAVIGATION =====
        const sideNavItems = document.querySelectorAll('.side-nav-item');
        const sections = document.querySelectorAll('.section, #stats');

        sideNavItems.forEach(item => {
            item.addEventListener('click', () => {
                const sectionId = item.dataset.section;
                const section = document.getElementById(sectionId);
                if (section) {
                    section.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        const sectionObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const sectionId = entry.target.id;
                    sideNavItems.forEach(item => {
                        item.classList.remove('active');
                        if (item.dataset.section === sectionId) {
                            item.classList.add('active');
                        }
                    });
                }
            });
        }, { threshold: 0.3 });

        sections.forEach(section => {
            sectionObserver.observe(section);
        });
    </script>
</body>
</html>
